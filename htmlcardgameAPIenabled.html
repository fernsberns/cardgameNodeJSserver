<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Card Game</title>
<style>
    .player {
        display: flex;
    }
    .card img {
        width: 80%; /* Adjusted size to be 80% smaller */
        height: auto; /* Automatically adjust height to maintain aspect ratio */
        max-width: 100px; /* Set a maximum width to prevent excessive shrinking */    
        border: solid 2px black;
        border-radius:10px;
    }
</style>
</head>
<body>

<h1 id="roomID"></h1>
<div class="player" id="player1"></div>

<script>
    const cards = [
       // Card data...
    ];

    async function fetchData(url) {
        try {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return await response.json();
        } catch (error) {
            console.error('There was a problem fetching data:', error);
        }
    }

    function populatePlayerHands(roomData) {
        if (!roomData || roomData.length === 0) return;

        const playersData = roomData[0];
        const playerIds = ['player1', 'player2', 'player3', 'player4'];

        playerIds.forEach((playerId, index) => {
            const playerData = playersData[`player${index + 1}hand`];
            const playerDiv = document.getElementById(playerId);
            if (!playerDiv) return;

            playerData.forEach(cardId => {
                const imageUrl = getCardImageUrl(cardId);
                if (imageUrl) {
                    const cardElement = createCardElement(imageUrl);
                    playerDiv.appendChild(cardElement);
                }
            });
        });
    }

    function getCardImageUrl(cardId) {
        const card = cards.find(c => c.id === cardId);
        if (card) {
            return `https://raw.githubusercontent.com/johnbernad6/swift-card-game/main/PinoyPoker/Assets.xcassets/${card.name}.imageset/${card.name}.png`;
        }
        return "";
    }

    function createCardElement(imageUrl) {
        const cardDiv = document.createElement("div");
        cardDiv.className = "card";
        const img = document.createElement("img");
        img.src = imageUrl;
        img.alt = "Card";
        cardDiv.appendChild(img);
        return cardDiv;
    }

    async function init() {
        const roomData = await fetchData('https://johnbernad6server-b837q.ondigitalocean.app/api/create-room');
        populatePlayerHands(roomData);
        displayRoomID(roomData);
    }

    function displayRoomID(roomData) {
        if (!roomData || roomData.length === 0) return;

        const roomID = roomData[0].gameroomid;
        const roomIDElement = document.getElementById('roomID');
        if (roomIDElement) {
            roomIDElement.textContent = `ROOM ID: ${roomID}`;
        }
    }

    init();
</script>

</body>
</html>
